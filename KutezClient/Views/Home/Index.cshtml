@model List<KutezApi.Model.Product>

@{
    ViewData["Title"] = "Product List";
}

<h1 class="page-title">Product List</h1>

<div class="product-grid">
    @for (int i = 0; i < Model.Count; i++)
    {
        var product = Model[i];
        var imgId = "productImg" + i;
        var colorNameId = "colorName" + i;
        <div class="product-card">
            <div class="product-image">
                <img id="@imgId" src="@product.Images.Yellow" alt="@product.Name" />
            </div>

            <div class="product-title">@product.Name</div>

            <div class="color-buttons">
                <label class="color-label yellow">
                    <input type="radio" name="color-@i" checked onchange="changeImage('@imgId', '@product.Images.Yellow', '@colorNameId', 'Yellow Gold')" />
                    <span class="color-dot"></span>
                </label>
                <label class="color-label white">
                    <input type="radio" name="color-@i" onchange="changeImage('@imgId', '@product.Images.White', '@colorNameId', 'White Gold')" />
                    <span class="color-dot"></span>
                </label>
                <label class="color-label rose">
                    <input type="radio" name="color-@i" onchange="changeImage('@imgId', '@product.Images.Rose', '@colorNameId', 'Rose Gold')" />
                    <span class="color-dot"></span>
                </label>
            </div>

            <div class="selected-color-name" id="@colorNameId">Yellow Gold</div>

            <div class="product-info" style="margin-top: 10px;">
                <p><strong>Popularity:</strong> @product.PopularityScore</p>
                <p><strong>Weight:</strong> @product.Weight g</p>
            </div>
        </div>
    }
</div>

<script>
    function changeImage(imgId, newSrc, colorNameId, colorName) {
        const img = document.getElementById(imgId);
        if (img) img.src = newSrc;

        const nameLabel = document.getElementById(colorNameId);
        if (nameLabel) nameLabel.textContent = colorName;
    }
</script>
